"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[671],{1671:(Y,g,a)=>{a.r(g),a.d(g,{SearchModule:()=>Q});var l=a(9808),s=a(1695),m=a(2687),f=a(4128),p=a(262),h=a(9646),e=a(4893),u=a(2340),C=a(520);let _=(()=>{class n{constructor(t){this.http=t,this.url=u.N.tmdb.url,this.apiKey=u.N.tmdb.apiKey}getSearchResults(t,i){return this.http.get(this.url+"/search/multi?api_key="+this.apiKey+"&query="+t+"&region=US&include_adult=false&page="+i)}getMovieById(t){return this.http.get(this.url+"/movie/"+t+"?api_key="+this.apiKey)}getTVById(t){return this.http.get(this.url+"/tv/"+t+"?api_key="+this.apiKey)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(C.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=a(6387),S=a(9047),M=a(5672),d=a(9966),v=a(9546);function P(n,o){1&n&&(e.TgZ(0,"div",6),e._UZ(1,"app-loader"),e.qZA())}function y(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-discover-card",8),e.NdJ("added",function(c){return e.CHM(t),e.oxw(2).onAddMovie(c)})("removed",function(c){return e.CHM(t),e.oxw(2).onRemoveMovie(c)}),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("cardType","movie")("cardData",t)("inCollection",i.movieCollection.includes(t.id.toString()))}}function O(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"app-discover-card",8),e.NdJ("added",function(c){return e.CHM(t),e.oxw(2).onAddTV(c)})("removed",function(c){return e.CHM(t),e.oxw(2).onRemoveTV(c)}),e.qZA()}if(2&n){const t=e.oxw().$implicit,i=e.oxw();e.Q6J("cardType","tv")("cardData",t)("inCollection",i.tvCollection.includes(t.id.toString()))}}function T(n,o){if(1&n&&(e.ynx(0),e.YNc(1,y,1,3,"app-discover-card",7),e.YNc(2,O,1,3,"app-discover-card",7),e.BQk()),2&n){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf","movie"===t.media_type),e.xp6(1),e.Q6J("ngIf","tv"===t.media_type)}}function w(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2),e.MAs(5).previous()}),e._UZ(1,"fa-icon",15),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faArrowLeft)}}function A(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){e.CHM(t);const c=e.oxw().$implicit;return e.oxw(2),e.MAs(5).setCurrent(c.value)}),e.TgZ(1,"span"),e._uU(2),e.qZA()()}if(2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.label)}}function Z(n,o){if(1&n&&(e.TgZ(0,"div")(1,"span"),e._uU(2),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.label)}}function R(n,o){if(1&n&&(e.TgZ(0,"div"),e.YNc(1,A,3,1,"a",11),e.YNc(2,Z,3,1,"div",16),e.qZA()),2&n){const t=o.$implicit;e.oxw(2);const i=e.MAs(5);e.ekj("current",i.getCurrent()===t.value),e.xp6(1),e.Q6J("ngIf",i.getCurrent()!==t.value),e.xp6(1),e.Q6J("ngIf",i.getCurrent()===t.value)}}function J(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"a",14),e.NdJ("click",function(){return e.CHM(t),e.oxw(2),e.MAs(5).next()}),e._UZ(1,"fa-icon",15),e.qZA()}if(2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("icon",t.faArrowRight)}}function I(n,o){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10),e.YNc(2,w,2,1,"a",11),e.qZA(),e.YNc(3,R,3,4,"div",12),e.TgZ(4,"div",13),e.YNc(5,J,2,1,"a",11),e.qZA()()),2&n){e.oxw();const t=e.MAs(5);e.xp6(1),e.ekj("disabled",t.isFirstPage()),e.xp6(1),e.Q6J("ngIf",!t.isFirstPage()),e.xp6(1),e.Q6J("ngForOf",t.pages),e.xp6(1),e.ekj("disabled",t.isLastPage()),e.xp6(1),e.Q6J("ngIf",!t.isLastPage())}}const N=[{path:"",component:(()=>{class n{constructor(t,i,c,r){this.route=t,this.router=i,this.searchSerivce=c,this.collectionService=r,this.searchResultData=[],this.isReady=!1,this.maxSize=5,this.config={itemsPerPage:20,currentPage:1,totalItems:20},this.faArrowLeft=m.EyR,this.faArrowRight=m.yOZ}ngOnInit(){this.movieCollection=this.collectionService.getCollection("movieCollection"),this.tvCollection=this.collectionService.getCollection("tvCollection"),console.log(this.movieCollection),console.log(this.tvCollection),this.route.queryParamMap.subscribe(t=>{this.isReady=!1,this.searchResultData=[],this.searchString=String(t.get("q")),this.config={itemsPerPage:20,currentPage:1,totalItems:20},this.searchString.includes("tmdb")?(0,f.D)({movie:this.searchSerivce.getMovieById(this.searchString.replace("tmdb","")).pipe((0,p.K)(()=>(0,h.of)(null))),tv:this.searchSerivce.getTVById(this.searchString.replace("tmdb","")).pipe((0,p.K)(()=>(0,h.of)(null)))}).subscribe(i=>{i.movie&&(i.movie.media_type="movie",this.searchResultData.push(i.movie)),i.tv&&(i.tv.media_type="tv",this.searchResultData.push(i.tv)),this.router.navigate([],{relativeTo:this.route,queryParams:{page:1},queryParamsHandling:"merge"}),this.isReady=!0}):Number(t.get("page"))?this.getSearchPage(Number(t.get("page"))):this.router.navigate([],{relativeTo:this.route,queryParams:{page:1},queryParamsHandling:"merge"})})}getSearchPage(t){this.isReady=!1,this.searchSerivce.getSearchResults(this.searchString,t).subscribe({next:i=>{t>Math.ceil(i.total_results/20)&&(t=1),this.config.currentPage=t,this.config.totalItems=i.total_results,this.searchResultData=i.results,console.log(this.searchResultData),this.router.navigate([],{relativeTo:this.route,queryParams:{page:t},queryParamsHandling:"merge"}),this.isReady=!0,window.scrollTo(0,0)},error:i=>{console.log(i),this.isReady=!0,window.scrollTo(0,0)}})}onAddMovie(t){this.movieCollection.push(t.toString()),this.collectionService.setCollection("movieCollection",this.movieCollection)}onRemoveMovie(t){const i=this.movieCollection.indexOf(t.toString());this.movieCollection.splice(i,1),this.collectionService.setCollection("movieCollection",this.movieCollection)}onAddTV(t){this.tvCollection.push(t.toString()),this.collectionService.setCollection("tvCollection",this.tvCollection)}onRemoveTV(t){const i=this.tvCollection.indexOf(t.toString());this.tvCollection.splice(i,1),this.collectionService.setCollection("tvCollection",this.tvCollection)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.gz),e.Y36(s.F0),e.Y36(_),e.Y36(x.a))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-search"]],decls:7,vars:7,consts:[["class","loader-container",4,"ngIf"],["id","results-container"],[4,"ngFor","ngForOf"],[3,"maxSize","pageChange"],["p","paginationApi"],["class","custom-pagination",4,"ngIf"],[1,"loader-container"],[3,"cardType","cardData","inCollection","added","removed",4,"ngIf"],[3,"cardType","cardData","inCollection","added","removed"],[1,"custom-pagination"],[1,"pagination-previous"],[3,"click",4,"ngIf"],[3,"current",4,"ngFor","ngForOf"],[1,"pagination-next"],[3,"click"],[3,"icon"],[4,"ngIf"]],template:function(t,i){if(1&t&&(e.YNc(0,P,2,0,"div",0),e.TgZ(1,"div",1),e.YNc(2,T,3,2,"ng-container",2),e.ALo(3,"paginate"),e.qZA(),e.TgZ(4,"pagination-template",3,4),e.NdJ("pageChange",function(r){return i.getSearchPage(r)}),e.YNc(6,I,6,7,"div",5),e.qZA()),2&t){const c=e.MAs(5);e.Q6J("ngIf",!i.isReady),e.xp6(2),e.Q6J("ngForOf",e.xi3(3,4,i.searchResultData,i.config)),e.xp6(2),e.Q6J("maxSize",i.maxSize),e.xp6(2),e.Q6J("ngIf",c.pages.length>1)}},directives:[l.O5,S.R,l.sg,M.v,d.tk,v.BN],pipes:[d._s],styles:["#results-container[_ngcontent-%COMP%]{display:grid;grid-gap:2em;grid-template-columns:15% 15% 15% 15% 15%;justify-content:space-evenly;padding:2em}h1[_ngcontent-%COMP%]{margin-bottom:.4em;font-weight:600;display:flex;justify-content:center}p[_ngcontent-%COMP%]{margin:1em 0;padding:0 3em;text-align:center;font-size:.9em;color:#666}.toggle-container[_ngcontent-%COMP%]{display:block;margin:1em auto auto;width:max-content;border-radius:20px;text-align:center;padding:.3em;background-color:#f8f8f8}.toggle-container[_ngcontent-%COMP%]   #toggle-movie[_ngcontent-%COMP%], .toggle-container[_ngcontent-%COMP%]   #toggle-tv[_ngcontent-%COMP%]{display:inline-block;cursor:pointer;padding:.4em 1em;border-radius:20px;width:3em;color:#666;font-weight:500}.toggle-container[_ngcontent-%COMP%]   .current[_ngcontent-%COMP%]{background-color:#000;color:#fff!important}.loader-container[_ngcontent-%COMP%]{margin-top:3em}.custom-pagination[_ngcontent-%COMP%]{display:flex;text-align:center;align-items:center;max-width:20em;margin:auto;padding-top:1em;padding-bottom:3em}.custom-pagination[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{flex:1;font-size:1.1em}.custom-pagination[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;padding:.6em}.current[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block;width:1.2em;color:#fff;background-color:#000;padding:.4em;margin:0;border-radius:20px;font-size:.8em}@media (min-width: 2100px){pagination-template[_ngcontent-%COMP%]{font-size:1.2em}}@media (min-width: 2000px){.discover-nav[_ngcontent-%COMP%]{font-size:1.3em}}@media (min-width: 1800px){#results-container[_ngcontent-%COMP%]{grid-template-columns:11% 11% 11% 11% 11% 11% 11% 11%}.custom-pagination[_ngcontent-%COMP%]{padding-top:3em}}@media (max-width: 1800px){#results-container[_ngcontent-%COMP%]{grid-template-columns:12% 12% 12% 12% 12% 12% 12%}}@media (max-width: 1400px){#results-container[_ngcontent-%COMP%]{grid-template-columns:14% 14% 14% 14% 14% 14%}}@media (max-width: 1150px){#results-container[_ngcontent-%COMP%]{grid-template-columns:17% 17% 17% 17% 17%}}@media (max-width: 1020px){#results-container[_ngcontent-%COMP%]{grid-template-columns:20% 20% 20% 20%}}@media (max-width: 760px){#results-container[_ngcontent-%COMP%]{font-size:.9em}}@media (max-width: 725px){.discover-nav[_ngcontent-%COMP%]{font-size:.9em}}@media (max-width: 650px){#results-container[_ngcontent-%COMP%]{grid-template-columns:25% 25% 25%}}@media (max-width: 530px){pagination-template[_ngcontent-%COMP%]{font-size:.9em}}@media (max-width: 500px){#results-container[_ngcontent-%COMP%]{grid-template-columns:33% 33%;padding-left:0;padding-right:0;padding-top:1em}.discover-nav[_ngcontent-%COMP%]{margin-bottom:.5em}}@media (max-width: 410px){#results-container[_ngcontent-%COMP%]{grid-template-columns:50%}}@media (max-width: 400px){pagination-template[_ngcontent-%COMP%]{font-size:.8em}}@media (max-width: 350px){pagination-template[_ngcontent-%COMP%]{font-size:.7em}.discover-nav[_ngcontent-%COMP%]{font-size:.8em}}"]}),n})()}];let z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[s.Bz.forChild(N)],s.Bz]}),n})();var F=a(4466),b=a(6375);let Q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[_],imports:[[l.ez,F.m,z,b.DiscoverModule,d.JX,v.uH]]}),n})()}}]);